(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9007],{7886:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>o,TN:()=>n});var a=t(2432),l=t(80364),r=t(46992),c=t(84963);let i=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=l.forwardRef((e,s)=>{let{className:t,variant:l,...r}=e;return(0,a.jsx)("div",{ref:s,role:"alert",className:(0,c.cn)(i({variant:l}),t),...r})});o.displayName="Alert",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h5",{ref:s,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",t),...l})}).displayName="AlertTitle";let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",t),...l})});n.displayName="AlertDescription"},12165:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},15742:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},16299:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},19270:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},20922:(e,s,t)=>{Promise.resolve().then(t.bind(t,30500))},24581:(e,s,t)=>{"use strict";t.d(s,{E:()=>r});var a=t(2432),l=t(84963);function r(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-primary/10",s),...t})}},30500:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(2432),l=t(34827),r=t(77382),c=t(24581),i=t(7886),o=t(16299),n=t(12165),d=t(19270),u=t(58761);let m=(0,u.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var x=t(47448),h=t(81048),y=t(15742);let g=(0,u.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var p=t(98512),v=t(80364);let b=e=>{let{title:s,value:t,icon:l,className:c="",subtitle:i,trend:n}=e;return(0,a.jsxs)(r.Zp,{className:"transition-all duration-200 hover:shadow-lg ".concat(c),children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium text-muted-foreground",children:s}),(0,a.jsx)("div",{className:"h-4 w-4 text-muted-foreground",children:l})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:t}),i&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:i}),n&&(0,a.jsxs)("div",{className:"flex items-center mt-2 text-xs",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 mr-1 text-green-500"}),(0,a.jsxs)("span",{className:"text-green-500 font-medium",children:[n.value,"%"]}),(0,a.jsx)("span",{className:"text-muted-foreground ml-1",children:n.label})]})]})]})},j=()=>(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.E,{className:"h-8 w-48 mb-2"}),(0,a.jsx)(c.E,{className:"h-4 w-96"})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,s)=>(0,a.jsxs)(r.Zp,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(c.E,{className:"h-4 w-24"}),(0,a.jsx)(c.E,{className:"h-4 w-4 rounded"})]}),(0,a.jsx)(c.E,{className:"h-8 w-20 mb-1"}),(0,a.jsx)(c.E,{className:"h-3 w-32"})]},s))})]}),N=function(){var e;let{data:s,isLoading:t,error:c}=(0,l.lU)(),{user:o,checkAuth:u,logout:N}=(0,p.A)();if(console.log("Dashboard data:",s),console.log("Is loading:",t),console.log("Error:",c),console.log("User:",o),(0,v.useEffect)(()=>{console.log("Document cookies:",document.cookie),console.log("localStorage auth_token:",localStorage.getItem("auth_token"))},[]),t)return(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsx)(j,{})});if(c)return(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)(i.Fc,{variant:"destructive",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)(i.TN,{children:"Failed to load dashboard data. Please try again later."})]})});if(!s)return null;let f=e=>"KES ".concat(e.toLocaleString("en-KE",{minimumFractionDigits:0}));return(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Outsourced Payroll Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Overview of your outsourced payroll operations and key metrics"})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsx)(b,{title:"Total Employees",value:s.totalEmployees,icon:(0,a.jsx)(d.A,{}),className:"border-blue-200 bg-blue-50/50",subtitle:"All registered employees"}),(0,a.jsx)(b,{title:"Active Employees",value:s.activeEmployees,icon:(0,a.jsx)(m,{}),className:"border-green-200 bg-green-50/50",subtitle:"Currently receiving payroll"}),(0,a.jsx)(b,{title:"Payroll Cycles",value:s.totalPayrollCycles,icon:(0,a.jsx)(x.A,{}),className:"border-purple-200 bg-purple-50/50",subtitle:"Total cycles processed"}),(0,a.jsx)(b,{title:"Last Payroll Run",value:(e=s.lastPayrollRun)?new Date(e).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}):"Never",icon:(0,a.jsx)(h.A,{}),className:"border-orange-200 bg-orange-50/50",subtitle:s.lastPayrollRun?"Most recent processing":"No payroll processed yet"}),(0,a.jsx)(b,{title:"Total Disbursed",value:f(s.totalAmountDisbursed),icon:(0,a.jsx)(y.A,{}),className:"border-emerald-200 bg-emerald-50/50",subtitle:"Lifetime disbursements"}),(0,a.jsx)(b,{title:"Pending Disbursements",value:s.pendingDisbursements,icon:(0,a.jsx)(g,{}),className:"".concat(s.pendingDisbursements>0?"border-red-200 bg-red-50/50":"border-gray-200 bg-gray-50/50"),subtitle:"Awaiting processing"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[s.pendingDisbursements>0&&(0,a.jsxs)(i.Fc,{className:"border-amber-200 bg-amber-50",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsxs)(i.TN,{children:["You have ",s.pendingDisbursements," pending disbursement",s.pendingDisbursements>1?"s":""," waiting to be processed."]})]}),0===s.totalEmployees&&(0,a.jsxs)(i.Fc,{className:"border-blue-200 bg-blue-50",children:[(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)(i.TN,{children:"Get started by adding employees to your outsourced payroll system."})]}),s.activeEmployees>0&&!s.lastPayrollRun&&(0,a.jsxs)(i.Fc,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsxs)(i.TN,{children:["You have ",s.activeEmployees," active employee",s.activeEmployees>1?"s":""," ready for payroll processing."]})]})]}),(0,a.jsxs)(r.Zp,{className:"bg-gradient-to-r from-slate-50 to-slate-100 border-slate-200",children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(g,{className:"h-5 w-5"}),"System Status"]})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[s.activeEmployees>0?Math.round(s.activeEmployees/s.totalEmployees*100):0,"%"]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Employee Utilization"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:s.totalPayrollCycles}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Successful Cycles"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:s.totalAmountDisbursed>0&&s.totalPayrollCycles>0?f(Math.round(s.totalAmountDisbursed/s.totalPayrollCycles)):"KES 0"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg. per Cycle"})]})]})})]})]})}},39262:(e,s,t)=>{"use strict";var a=t(66834);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},47448:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},81048:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(58761).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},98512:(e,s,t)=>{"use strict";t.d(s,{A:()=>n,AuthProvider:()=>o});var a=t(2432),l=t(80364),r=t(39262),c=t(81738);let i=(0,l.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,l.useState)(null),[n,d]=(0,l.useState)(!0),u=(0,r.useRouter)(),m=(0,r.usePathname)(),x=async()=>{d(!0);try{let e=await c.A.get("/api/auth/me");console.log("Auth check response:",e.data),e.data&&e.data?o(e.data):o(null)}catch(e){console.error("Auth check error:",e),o(null)}finally{d(!1)}},h=async()=>{try{await c.A.post("/api/auth/logout")}catch(e){console.error("Logout error:",e)}finally{o(null),localStorage.removeItem("auth_token"),u.push("/login")}};return(0,l.useEffect)(()=>{"/"===m||"/login"===m||"/signup"===m||"/password-reset"===m?d(!1):x()},[m]),(0,a.jsx)(i.Provider,{value:{user:t,isLoading:n,isAuthenticated:!!t,logout:h,checkAuth:x},children:s})}function n(){let e=(0,l.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[8655,4600,7060,642,5022,5575,7358],()=>s(20922)),_N_E=e.O()}]);
//# sourceMappingURL=page-75a1ec5b7413654e.js.map