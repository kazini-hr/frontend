(()=>{var e={};e.id=96,e.ids=[96],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20262:(e,s,t)=>{"use strict";t.d(s,{b:()=>l});var a=t(49837),r=t(34046),n=t(89812),i=a.forwardRef((e,s)=>(0,n.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var l=i},21820:e=>{"use strict";e.exports=require("os")},27202:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7610).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30090:(e,s,t)=>{"use strict";t.d(s,{bq:()=>p,eb:()=>f,gC:()=>x,l6:()=>o,yv:()=>m});var a=t(89812),r=t(49837),n=t(57352),i=t(49456),l=t(90613),c=t(76316),d=t(87677);let o=n.bL;n.YJ;let m=n.WT,p=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(n.l9,{ref:r,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=n.l9.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}));h.displayName=n.PP.displayName;let u=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}));u.displayName=n.wn.displayName;let x=r.forwardRef(({className:e,children:s,position:t="popper",...r},i)=>(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:i,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(u,{})]})}));x.displayName=n.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",e),...s})).displayName=n.JU.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(n.q7,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:s})]}));f.displayName=n.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=n.wv.displayName},31892:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7610).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},33873:e=>{"use strict";e.exports=require("path")},41635:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/wallet/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/wallet/page.tsx","default")},46389:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7610).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},61742:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>D});var a=t(89812),r=t(49837),n=t(3308),i=t(43394),l=t(53380),c=t(76576),d=t(65698),o=t(30090),m=t(51828),p=t(70140),h=t(73121),u=t(65246),x=t(58891),f=t(37505),j=t(27202),y=t(7610);let v=(0,y.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var g=t(49896);let b=(0,y.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var N=t(53821),w=t(44303),k=t(61930);let A=(0,y.A)("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var C=t(96218),_=t(31892),P=t(46389);let E=(0,y.A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var S=t(30298);let T=({isOpen:e,onClose:s})=>{let[t,l]=(0,r.useState)(""),[m,h]=(0,r.useState)("bank_transfer"),[x,y]=(0,r.useState)(""),[w,k]=(0,r.useState)(null),A=(0,n.u9)(),{toast:C}=(0,f.d)(),_=async e=>{e.preventDefault();try{let e={amount:parseInt(t),payment_method:m,..."mpesa"===m&&{customer_phone:x}},s=await A.mutateAsync(e);k(s),C({title:"Payment Instructions Generated",description:"Follow the instructions below to complete your payment."})}catch(e){C({title:"Error",description:(0,n.hS)(e),variant:"destructive"})}},P=e=>{navigator.clipboard.writeText(e),C({title:"Copied",description:"Copied to clipboard"})},E=()=>{l(""),y(""),k(null)},S=()=>{E(),s()};return(0,a.jsx)(p.lG,{open:e,onOpenChange:S,children:(0,a.jsxs)(p.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Fund Wallet"}),(0,a.jsx)(p.rr,{children:"Add funds to your outsourced payroll wallet"})]}),w?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(u.Fc,{className:"border-blue-200 bg-blue-50",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)(u.TN,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Payment Instructions"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Reference:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"bg-white px-2 py-1 rounded text-sm",children:w.reference}),(0,a.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>P(w.reference),children:(0,a.jsx)(b,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Amount:"}),(0,a.jsxs)("span",{children:["KES ",w.amount.toLocaleString()]})]})]}),"bank_transfer"===w.payment_method&&(0,a.jsxs)("div",{className:"bg-white p-3 rounded space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Bank:"})," ",w.payment_instructions.bank_name]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:(0,a.jsx)("strong",{children:"Account:"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:w.payment_instructions.account_number}),(0,a.jsx)(i.$,{size:"sm",variant:"ghost",onClick:()=>P(w.payment_instructions.account_number||""),children:(0,a.jsx)(b,{className:"h-3 w-3"})})]})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",w.payment_instructions.account_name]}),(0,a.jsxs)(u.Fc,{className:"border-red-200 bg-red-50 mt-3",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsxs)(u.TN,{className:"text-sm",children:[(0,a.jsx)("strong",{children:"IMPORTANT:"})," Use reference"," ",(0,a.jsx)("code",{children:w.reference})," for easy identification"]})]})]}),"mpesa"===w.payment_method&&(0,a.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,a.jsx)("p",{children:"Check your phone for the M-PESA payment prompt"}),w.message&&(0,a.jsxs)("div",{className:"mt-3 border-t pt-3",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"Alternative Payment Method:"}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded-md text-sm",children:w.message.split(/\d+\./).filter(Boolean).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start mb-2 last:mb-0",children:[(0,a.jsx)("div",{className:"bg-blue-100 text-blue-800 font-semibold rounded-full w-6 h-6 flex items-center justify-center mr-2 shrink-0",children:s+1}),(0,a.jsx)("div",{className:"mt-0.5",children:e.trim()})]},s))})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"After completing payment, use the verification form to credit your wallet"})]})]})})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(i.$,{variant:"outline",onClick:S,children:"Close"}),"bank_transfer"===w.payment_method&&(0,a.jsx)(i.$,{onClick:()=>{S()},children:"I've Made the Transfer"})]})]}):(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"amount",children:"Amount (KES)"}),(0,a.jsx)(c.p,{id:"amount",type:"number",placeholder:"100000",min:"1",value:t,onChange:e=>l(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"paymentMethod",children:"Payment Method"}),(0,a.jsxs)(o.l6,{value:m,onValueChange:e=>h(e),children:[(0,a.jsx)(o.bq,{children:(0,a.jsx)(o.yv,{})}),(0,a.jsxs)(o.gC,{children:[(0,a.jsx)(o.eb,{value:"bank_transfer",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Bank Transfer"]})}),(0,a.jsx)(o.eb,{value:"mpesa",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(v,{className:"h-4 w-4 mr-2"}),"M-PESA"]})})]})]})]}),"mpesa"===m&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"customerPhone",children:"Phone Number"}),(0,a.jsx)(c.p,{id:"customerPhone",placeholder:"254700123456",value:x,onChange:e=>y(e.target.value),required:!0})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:S,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:A.isPending,children:A.isPending?"Generating...":"Generate Payment Instructions"})]})]})]})})},M=({isOpen:e,onClose:s,reference:t=""})=>{let[l,o]=(0,r.useState)({reference:t,bank_transaction_reference:"",amount:"",payment_date:""}),m=(0,n.Lz)(),{toast:h}=(0,f.d)(),u=async e=>{e.preventDefault();try{let e={reference:l.reference,bank_transaction_reference:l.bank_transaction_reference,amount:parseInt(l.amount),...l.payment_date&&{payment_date:l.payment_date}};await m.mutateAsync(e),h({title:"Transfer Confirmed",description:"Your transfer is now pending approval from our admin team."}),s(),o({reference:"",bank_transaction_reference:"",amount:"",payment_date:""})}catch(e){h({title:"Error",description:(0,n.hS)(e),variant:"destructive"})}};return(0,a.jsx)(p.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(p.Cf,{children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Confirm Bank Transfer"}),(0,a.jsx)(p.rr,{children:"Please enter the details of your bank transfer"})]}),(0,a.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"reference",children:"Payment Reference"}),(0,a.jsx)(c.p,{id:"reference",value:l.reference,onChange:e=>o(s=>({...s,reference:e.target.value})),placeholder:"Payment reference from fund request",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"bankRef",children:"Bank Transaction Reference"}),(0,a.jsx)(c.p,{id:"bankRef",value:l.bank_transaction_reference,onChange:e=>o(s=>({...s,bank_transaction_reference:e.target.value})),placeholder:"Bank transaction number/reference",required:!0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"This is the reference number from your bank"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"transferAmount",children:"Amount Transferred (KES)"}),(0,a.jsx)(c.p,{id:"transferAmount",type:"number",value:l.amount,onChange:e=>o(s=>({...s,amount:e.target.value})),placeholder:"100000",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"paymentDate",children:"Payment Date (Optional)"}),(0,a.jsx)(c.p,{id:"paymentDate",type:"date",value:l.payment_date,onChange:e=>o(s=>({...s,payment_date:e.target.value})),max:new Date().toISOString().split("T")[0]})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:m.isPending,children:m.isPending?"Confirming...":"Confirm Transfer"})]})]})]})})},R=({isOpen:e,onClose:s})=>{let[t,l]=(0,r.useState)({reference:"",approved:!1,notes:""}),o=(0,n.oj)(),{toast:m}=(0,f.d)(),h=async e=>{e.preventDefault();try{let e={reference:t.reference,approved:!0,...t.notes&&{amount:parseInt(t.notes)}},a=await o.mutateAsync(e),r="data"in a&&a.data?a.data:a;r.success?(m({title:"Success!",description:`KES ${r.amount?.toLocaleString()} has been credited to your wallet.`}),s(),l({reference:"",approved:!1,notes:""})):m({title:"Verification Failed",description:r.message,variant:"destructive"})}catch(e){m({title:"Error",description:(0,n.hS)(e),variant:"destructive"})}};return(0,a.jsx)(p.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(p.Cf,{children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Approve Bank Transfer"}),(0,a.jsx)(p.rr,{children:"Enter the Bank Transfer Reference code you received after making payment"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"ref",children:"Reference"}),(0,a.jsx)(c.p,{id:"ref",value:t.reference,onChange:e=>l(s=>({...s,reference:e.target.value.toUpperCase()})),placeholder:"OUT_FUND_AB48949_488",pattern:"^OUT_FUND_.*$",title:"Use the reference code provided by the system",className:"font-mono",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"notes",children:"Notes (Optional)"}),(0,a.jsx)(c.p,{id:"notes",type:"number",value:t.notes,onChange:e=>l(s=>({...s,notes:e.target.value})),placeholder:"Add notes or verification details"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional: Add any notes or verification details"})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:o.isPending,children:o.isPending?"Approving...":"Approve & Complete Wallet Transaction"})]})]})]})})},q=({isOpen:e,onClose:s})=>{let[t,l]=(0,r.useState)({mpesa_transaction_code:"",amount:""}),o=(0,n.nR)(),{toast:m}=(0,f.d)(),h=async e=>{e.preventDefault();try{let e={mpesa_transaction_code:t.mpesa_transaction_code,...t.amount&&{amount:parseInt(t.amount)}},a=await o.mutateAsync(e),r="data"in a&&a.data?a.data:a;r.success?(m({title:"Success!",description:`KES ${r.amount?.toLocaleString()} has been credited to your wallet.`}),s(),l({mpesa_transaction_code:"",amount:""})):m({title:"Verification Failed",description:r.message,variant:"destructive"})}catch(e){m({title:"Error",description:(0,n.hS)(e),variant:"destructive"})}};return(0,a.jsx)(p.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(p.Cf,{children:[(0,a.jsxs)(p.c7,{children:[(0,a.jsx)(p.L3,{children:"Verify M-PESA Transaction"}),(0,a.jsx)(p.rr,{children:"Enter the M-PESA transaction code you received after making payment"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"mpesaCode",children:"M-PESA Transaction Code"}),(0,a.jsx)(c.p,{id:"mpesaCode",value:t.mpesa_transaction_code,onChange:e=>l(s=>({...s,mpesa_transaction_code:e.target.value.toUpperCase()})),placeholder:"QGJ7XKHM6Y",pattern:"[A-Z0-9]{10}",title:"Transaction code should be 10 characters",className:"font-mono",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"verifyAmount",children:"Amount (Optional)"}),(0,a.jsx)(c.p,{id:"verifyAmount",type:"number",value:t.amount,onChange:e=>l(s=>({...s,amount:e.target.value})),placeholder:"100000"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional: Verify the amount matches"})]}),(0,a.jsxs)(p.Es,{children:[(0,a.jsx)(i.$,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsx)(i.$,{type:"submit",disabled:o.isPending,children:o.isPending?"Verifying...":"Verify & Credit Wallet"})]})]})]})})};function D(){let{user:e}=(0,S.A)(),s=e?.user?.roles,[t,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!1),[p,y]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[D,F]=(0,r.useState)(!1),{data:L,error:$,isLoading:I}=(0,n.vT)();(0,n.dA)();let{toast:O}=(0,f.d)(),{data:z,isLoading:U,error:W,refetch:G}=(0,n.X2)(),{data:J,isLoading:K,refetch:B}=(0,n.K8)(20,0),H=e=>`KES ${e.toLocaleString("en-KE",{minimumFractionDigits:0})}`;return I||D?(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Wallet Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:D?"Creating your wallet...":"Loading wallet information..."})]}),(0,a.jsxs)(l.Zp,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),"Outsourced Payroll Wallet"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(x.E,{className:"h-12 w-48"}),(0,a.jsx)(x.E,{className:"h-4 w-32"}),(0,a.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,a.jsx)(x.E,{className:"h-10 w-32"}),(0,a.jsx)(x.E,{className:"h-10 w-32"})]})]})})]})]}):W||$?(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)(u.Fc,{variant:"destructive",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)(u.TN,{children:"Failed to load wallet information. Please try again later."})]})}):(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Wallet Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your outsourced payroll wallet balance and transactions"})]}),(0,a.jsxs)(l.Zp,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),"Outsourced Payroll Wallet"]})}),(0,a.jsx)(l.Wu,{children:U?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(x.E,{className:"h-12 w-48"}),(0,a.jsx)(x.E,{className:"h-4 w-32"}),(0,a.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,a.jsx)(x.E,{className:"h-10 w-32"}),(0,a.jsx)(x.E,{className:"h-10 w-32"})]})]}):z?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-4xl font-bold text-blue-700",children:H(z.balance)}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last updated:"," ",new Date(z.last_updated).toLocaleString()]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mt-6",children:[(0,a.jsxs)(i.$,{onClick:()=>c(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Fund Wallet"]}),(0,a.jsxs)(i.$,{onClick:()=>o(!0),variant:"outline",className:"border-green-200 text-green-700 hover:bg-green-50",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Confirm Bank Transfer"]}),s?.includes("SUPER_ADMIN")&&J?.transactions?.some(e=>"PENDING"===e.paymentStatus)&&(0,a.jsxs)(i.$,{onClick:()=>b(!0),variant:"outline",className:"border-yellow-200 text-yellow-700 hover:bg-yellow-50",children:[(0,a.jsx)(A,{className:"h-4 w-4 mr-2"}),"Approve Bank Transfer"]}),(0,a.jsxs)(i.$,{onClick:()=>y(!0),variant:"outline",className:"border-orange-200 text-orange-700 hover:bg-orange-50",children:[(0,a.jsx)(v,{className:"h-4 w-4 mr-2"}),"Verify M-PESA"]})]})]}):null})]}),(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-5 w-5"}),"Recent Transactions"]})}),(0,a.jsx)(l.Wu,{children:K?(0,a.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,s)=>(0,a.jsx)(x.E,{className:"h-16 w-full"},s))}):J?.transactions.length===0?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(C.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No transactions yet"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Your wallet transactions will appear here"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(m.XI,{children:[(0,a.jsx)(m.A0,{children:(0,a.jsxs)(m.Hj,{children:[(0,a.jsx)(m.nd,{children:"Date"}),(0,a.jsx)(m.nd,{children:"Type"}),(0,a.jsx)(m.nd,{children:"Amount"}),(0,a.jsx)(m.nd,{children:"Reference"}),(0,a.jsx)(m.nd,{children:"Status"})]})}),(0,a.jsx)(m.BF,{children:J?.transactions.map(e=>a.jsxs(m.Hj,{children:[a.jsx(m.nA,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_.A,{className:"h-4 w-4 text-muted-foreground"}),new Date(e.createdAt).toLocaleDateString()]})}),a.jsx(m.nA,{children:a.jsxs("div",{className:"flex items-center gap-2",children:["CREDIT"===e.transactionType?a.jsx(P.A,{className:"h-4 w-4 text-green-500"}):a.jsx(E,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:`font-medium ${"CREDIT"===e.transactionType?"text-green-700":"text-red-700"}`,children:"CREDIT"===e.transactionType?"Credit":"Debit"})]})}),a.jsx(m.nA,{children:a.jsxs("span",{className:`font-bold ${"CREDIT"===e.transactionType?"text-green-600":"text-red-600"}`,children:["CREDIT"===e.transactionType?"+":"-",H(e.amount)]})}),a.jsx(m.nA,{children:a.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs",children:e.reference})}),a.jsx(m.nA,{children:a.jsx(h.E,{variant:"COMPLETED"===e.paymentStatus?"default":"secondary",children:e.paymentStatus})})]},e.id))})]}),J&&J.total_count>J.limit&&(0,a.jsx)("div",{className:"text-center pt-4",children:(0,a.jsx)(i.$,{variant:"outline",size:"sm",children:"Load More Transactions"})})]})})]}),z&&z.balance<1e5&&(0,a.jsxs)(u.Fc,{className:"border-amber-200 bg-amber-50",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)(u.TN,{children:"Your wallet balance is running low. Consider adding funds to ensure smooth payroll processing."})]}),(0,a.jsx)(T,{isOpen:t,onClose:()=>c(!1)}),(0,a.jsx)(M,{isOpen:d,onClose:()=>o(!1)}),(0,a.jsx)(R,{isOpen:g,onClose:()=>b(!1)}),(0,a.jsx)(q,{isOpen:p,onClose:()=>y(!1)})]})}},61930:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7610).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65698:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var a=t(89812),r=t(49837),n=t(20262),i=t(49602),l=t(87677);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(n.b,{ref:t,className:(0,l.cn)(c(),e),...s}));d.displayName=n.b.displayName},74075:e=>{"use strict";e.exports=require("zlib")},76576:(e,s,t)=>{"use strict";t.d(s,{p:()=>i});var a=t(89812),r=t(49837),n=t(87677);let i=r.forwardRef(({className:e,type:s,...t},r)=>(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));i.displayName="Input"},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},88191:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>p,tree:()=>d});var a=t(7702),r=t(63409),n=t(88409),i=t.n(n),l=t(4102),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let d={children:["",{children:["outsourced",{children:["wallet",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41635)),"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/wallet/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,52140)),"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,77548))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,35955)),"/Users/aka/Workspace/KaziniHR/hrms/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,78907,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,77548))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,o=["/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/wallet/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/outsourced/wallet/page",pathname:"/outsourced/wallet",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},89367:(e,s,t)=>{Promise.resolve().then(t.bind(t,61742))},94735:e=>{"use strict";e.exports=require("events")},94943:(e,s,t)=>{Promise.resolve().then(t.bind(t,41635))},96218:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7610).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[95,163,167,91,543,747,918,243,544,26,710],()=>t(88191));module.exports=a})();