(()=>{var e={};e.id=9169,e.ids=[9169],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19233:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o});var a=r(7702),t=r(63409),l=r(88409),n=r.n(l),i=r(4102),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(s,c);let o={children:["",{children:["outsourced",{children:["payroll",{children:["summary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,67862)),"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/payroll/summary/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,52140)),"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,77548))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,81622)),"/Users/aka/Workspace/KaziniHR/hrms/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,2655,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,60002,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,78907,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,77548))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/payroll/summary/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/outsourced/payroll/summary/page",pathname:"/outsourced/payroll/summary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},21736:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7610).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},21820:e=>{"use strict";e.exports=require("os")},27202:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7610).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},41030:(e,s,r)=>{Promise.resolve().then(r.bind(r,47415))},47415:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>A});var a=r(89812),t=r(49837),l=r(3308),n=r(43394),i=r(53380),c=r(51828),o=r(18086),d=r(73121),m=r(65246),x=r(58891),h=r(37505),u=r(53821),p=r(7610);let j=(0,p.A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var y=r(65602),b=r(7440),N=r(21736);let f=(0,p.A)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var g=r(49896),v=r(12474),w=r(27202);let k=(0,p.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),P=({isOpen:e,onClose:s,summary:r,onConfirm:t})=>(0,a.jsx)(o.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(o.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{children:"Confirm Payroll Processing"}),(0,a.jsx)(o.rr,{children:"This will process payroll for all active employees. Please review the summary below."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(i.Zp,{className:"bg-muted/30",children:(0,a.jsx)(i.Wu,{className:"pt-4",children:(0,a.jsxs)("div",{className:"grid gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Employees:"}),(0,a.jsx)("span",{children:r.employeeCount})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Gross Pay:"}),(0,a.jsxs)("span",{children:["KES ",r.totalGrossPay.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"PAYE Tax:"}),(0,a.jsxs)("span",{className:"text-red-600",children:["KES ",r.totalPayeTax.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"Net Pay:"}),(0,a.jsxs)("span",{className:"text-green-600",children:["KES ",r.totalNetPay.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium",children:"KaziniHR Fees (2%):"}),(0,a.jsxs)("span",{className:"text-blue-600",children:["KES ",r.totalKaziniHRFees.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between font-bold",children:[(0,a.jsx)("span",{children:"Total Amount:"}),(0,a.jsxs)("span",{children:["KES ",r.totalDisbursementAmount.toLocaleString()]})]})]})})}),(0,a.jsxs)(m.Fc,{className:"border-amber-200 bg-amber-50",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsxs)(m.TN,{children:[(0,a.jsx)("strong",{children:"Important:"})," This action cannot be undone. Ensure all employee data is correct before proceeding."]})]})]}),(0,a.jsxs)(o.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsxs)(n.$,{onClick:t,className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(j,{className:"h-4 w-4 mr-2"}),"Process Payroll"]})]})]})});function A(){let[e,s]=(0,t.useState)(!1),{data:r,isLoading:o,error:p}=(0,l.Hu)();console.log("summary",r);let A=(0,l.Iu)(),{toast:E}=(0,h.d)(),q=e=>`KES ${e.toLocaleString("en-KE",{minimumFractionDigits:0})}`,C=async()=>{try{await A.mutateAsync({}),E({title:"Payroll Processed",description:"Payroll has been processed successfully. Check reports for details."}),s(!1)}catch(e){E({title:"Processing Failed",description:(0,l.hS)(e),variant:"destructive"})}};return p?(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)(m.Fc,{variant:"destructive",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)(m.TN,{children:"Failed to load payroll summary. Please try again later."})]})}):o?(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(x.E,{className:"h-8 w-64"}),(0,a.jsx)(x.E,{className:"h-4 w-96"})]}),(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(i.Zp,{children:(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsx)(x.E,{className:"h-4 w-20 mb-2"}),(0,a.jsx)(x.E,{className:"h-8 w-24"})]})},s))}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"pt-6",children:(0,a.jsx)(x.E,{className:"h-64 w-full"})})})]}):r?(0,a.jsxs)("div",{className:"container mx-auto py-6 px-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Payroll Summary"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Review payroll calculations before processing"})]}),(0,a.jsxs)(n.$,{onClick:()=>s(!0),disabled:0===r.employeeCount||A.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(j,{className:"h-4 w-4 mr-2"}),A.isPending?"Processing...":"Process Payroll"]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-6",children:[(0,a.jsxs)(i.Zp,{className:"border-blue-200 bg-blue-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Employees"}),(0,a.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:r.employeeCount})})]}),(0,a.jsxs)(i.Zp,{className:"border-green-200 bg-green-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Gross Pay"}),(0,a.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-xl font-bold text-green-700",children:q(r.totalGrossPay)})})]}),(0,a.jsxs)(i.Zp,{className:"border-red-200 bg-red-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"PAYE Tax"}),(0,a.jsx)(f,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-xl font-bold text-red-700",children:q(r.totalPayeTax)})})]}),(0,a.jsxs)(i.Zp,{className:"border-emerald-200 bg-emerald-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Net Pay"}),(0,a.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-xl font-bold text-emerald-700",children:q(r.totalNetPay)})})]}),(0,a.jsxs)(i.Zp,{className:"border-purple-200 bg-purple-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"KaziniHR Fees"}),(0,a.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"text-xl font-bold text-purple-700",children:q(r.totalKaziniHRFees)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"2% of net pay"})]})]}),(0,a.jsxs)(i.Zp,{className:"border-slate-200 bg-slate-50/50",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-medium",children:"Total Amount"}),(0,a.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"text-xl font-bold text-slate-700",children:q(r.totalDisbursementAmount)})})]})]}),(0,a.jsxs)(m.Fc,{className:"border-blue-200 bg-blue-50",children:[(0,a.jsx)(k,{className:"h-4 w-4"}),(0,a.jsx)(m.TN,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Transaction Fees"}),(0,a.jsx)("p",{className:"text-sm",children:"KaziniHR charges 2% of the net pay amount. This fee will be automatically collected and sent to:"}),(0,a.jsx)("div",{className:"bg-white p-3 rounded border text-sm",children:(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Bank:"})," ",r?.kazinihrAccount?.bankName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Account:"})," ",r?.kazinihrAccount?.accountNumber]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Name:"})," ",r?.kazinihrAccount?.accountName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Bank Code:"})," ",r?.kazinihrAccount?.bankCode]})]})})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{children:"Employee Breakdown"})}),(0,a.jsx)(i.Wu,{children:0===r.breakdown.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(b.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No active employees"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add employees to see payroll breakdown"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Account Number"}),(0,a.jsx)(c.nd,{children:"Bank Code"}),(0,a.jsx)(c.nd,{className:"text-right",children:"Gross Pay"}),(0,a.jsx)(c.nd,{className:"text-right",children:"PAYE Tax"}),(0,a.jsx)(c.nd,{className:"text-right",children:"Net Pay"}),(0,a.jsx)(c.nd,{className:"text-right",children:"KaziniHR Fee"})]})}),(0,a.jsx)(c.BF,{children:r.breakdown.map(e=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{className:"font-mono",children:e.accountNumber}),(0,a.jsx)(c.nA,{children:(0,a.jsx)(d.E,{variant:"outline",className:"font-mono",children:e.bankCode})}),(0,a.jsx)(c.nA,{className:"text-right font-medium",children:q(e.grossPay)}),(0,a.jsx)(c.nA,{className:"text-right text-red-600 font-medium",children:q(e.payeTax)}),(0,a.jsx)(c.nA,{className:"text-right text-green-600 font-medium",children:q(e.netPay)}),(0,a.jsx)(c.nA,{className:"text-right text-purple-600 font-medium",children:q(e.kazinihrFee)})]},e.employeeId))})]})})})]}),0===r.employeeCount&&(0,a.jsxs)(m.Fc,{className:"border-amber-200 bg-amber-50",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)(m.TN,{children:"No employees are available for payroll processing. Please add employees first."})]}),r.totalDisbursementAmount>0&&(0,a.jsxs)(m.Fc,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsxs)(m.TN,{children:["Payroll summary is ready. Total disbursement amount:"," ",(0,a.jsx)("strong",{children:q(r.totalDisbursementAmount)})]})]}),r&&(0,a.jsx)(P,{isOpen:e,onClose:()=>s(!1),summary:r,onConfirm:C})]}):(0,a.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,a.jsxs)(m.Fc,{className:"border-blue-200 bg-blue-50",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)(m.TN,{children:"No payroll data available. Please ensure you have active employees and proper configuration."})]})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},58334:(e,s,r)=>{Promise.resolve().then(r.bind(r,67862))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65602:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(7610).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},67862:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(430).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/payroll/summary/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/aka/Workspace/KaziniHR/hrms/app/outsourced/payroll/summary/page.tsx","default")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[7095,163,1167,2484,5091,1984,768,2102,8163,3394],()=>r(19233));module.exports=a})();